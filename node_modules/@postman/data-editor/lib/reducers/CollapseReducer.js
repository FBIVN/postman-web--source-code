'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var CollapseReducer = function CollapseReducer(state, _ref) {
  var node = _ref.node,
      column = _ref.column;

  // Check if the current node has children. If it doesn't, nothing has to be done
  var children = state.getIn(['rows', '' + node, 'allChildren']);
  if (!children) {
    return state;
  }

  // If the row is already collapsed, there is nothing to do
  var isCollapsed = state.getIn(['collapsedRows', '' + node]);
  if (isCollapsed) {
    return state;
  }

  // Remove the node's children from the state's order list
  var order = state.getIn(['order']);
  order = order.filter(function (nodeId) {
    return !children.includes(nodeId);
  });
  state = state.setIn(['order'], order);

  // Add this node to the collapsedRows list
  state = state.setIn(['collapsedRows', '' + node], true);

  return state;
};

exports.default = CollapseReducer;